<head>

		<script type="text/javascript" src="flotr-0.1.0alpha.js"></script>
		<script type="text/javascript" src="calculation.js"></script>
		<script type="text/javascript" src="prototype-1.6.0.2.js"></script>

<title>How Fscked is My Consistency?</title>
<link rel=StyleSheet href="consistency.css" type="text/css">

</head>

<body>
<h1>How Fscked is My Consistency?</h1>

<p>You have a 97.9% chance of reading the latest version 2 seconds after it commits.</p>

You have a 97.9% chance of reading one of the 5 latest versions 5 seconds after they commit.


<script type="text/javascript">
    document.observe('dom:loaded', function(){
    editWLambda(100);
    editRLambda(100);
    editALambda(100);
		       });



function showR(R)
{
	document.getElementById("Rslider").innerHTML=R;
}

function showN(N)
{
	document.getElementById("Nslider").innerHTML=N;
        if(document.getElementById("Rslider").innerHTML > N)
            showR(N);
        if(document.getElementById("Wslider").innerHTML > N)
            showW(N);

        document.getElementById("Rinput").setAttribute("max", N);
        document.getElementById("Winput").setAttribute("max", N);

}

function showW(W)
{
	document.getElementById("Wslider").innerHTML=W;
}


function editRLambda(rlambda)
{
		   document.getElementById("rlambda").innerHTML=(rlambda/1000).toFixed(3);
		   var d2 = [];
    for(var i = 0; i < Math.min(20000/rlambda, 300); i += 0.5)
		       
		       d2.push([i, calc_exponential_cdf(rlambda/1000, i)]);
		   
		   var f = Flotr.draw($('rcontainer'), [ d2 ]);
}


function editWLambda(wlambda)
{
	document.getElementById("wlambda").innerHTML=(wlambda/1000).toFixed(3);
var d1 = [];
for(var i = 0; i < Math.min(20000/wlambda, 300); i += 0.5)
		       d1.push([i, calc_exponential_cdf(wlambda/1000, i)]);
		   
		   var f = Flotr.draw($('wcontainer'), [ d1 ]);

}


function editALambda(alambda)
{
	document.getElementById("alambda").innerHTML=(alambda/1000).toFixed(3);
var d1 = [];
for(var i = 0; i < Math.min(20000/alambda, 300); i += 0.5)
		       d1.push([i, calc_exponential_cdf(alambda/1000, i)]);
		   
		   var f = Flotr.draw($('acontainer'), [ d1 ]);
}

</script>





<table cellpadding=20px align="center">
<tr>
<td>
<div id="nrwpanel">
<b>Staleness Settings</b><br/><br/>
SOME: <input id="fakeid2" type="range"  min="1" max="9" value="3" step="1" onchange=""/><span id="foo">3</span><br>
STUFF: <input id="fakeid" type="range"  min="1" max="3" value="1" step="1" onchange=""/><span id="bar">1</span><br>
</div>
</td>
<td>
<div id="nrwpanel">
<b>Replica Configuration</b><br/><br/>
N: <input type="range"  min="1" max="9" value="3" step="1" onchange="showN(this.value)"/><span id="Nslider">3</span><br>
R: <input id="Rinput" type="range"  min="1" max="3" value="1" step="1" onchange="showR(this.value)"/><span id="Rslider">1</span><br>
W: <input id="Winput" type="range"  min="1" max="3" value="1" step="1" onchange="showW(this.value)"/><span id="Wslider">1</span><br>
</div>
</td>
</tr>
</table>

<div id="latencypanel">
<b>Operation Latency</b><br/>
Exponentially Distributed CDFs</br>
<table cellpadding=20px align="center">
<tr>
<td>
  <center>
    <span class="graph-label">Write Request to Replica </span>
    <div id="wcontainer" style="width:180px;height:100px;"></div>
    <span class="axis-label">Latency (ms)</span><br/>
    &#x3BB; <input type="range"  min="1" max="1000" value="100" step="1" onchange="editWLambda(this.value)"/><span id="wlambda">.100</span><br>
  </center>
</td>

<td align="center">
  <center>
    <span class="graph-label">Read Request to Replica </span>
    <div id="rcontainer" style="width:180px;height:100px;"></div>
    <span class="axis-label">Latency (ms)</span><br/>
    &#x3BB;  <input type="range"  min="1" max="1000" value="100" step="1" onchange="editRLambda(this.value)"/><span id="rlambda">.100</span><br>
  </center>
</td>

<td>
  <center>
    <span class="graph-label"> Response from Replica </span>
    <div id="acontainer" style="width:180px;height:100px;"></div>
    <span class="axis-label">Latency (ms)</span><br/>
    &#x3BB; <input type="range"  min="1" max="1000" value="100" step="1" onchange="editALambda(this.value)"/><span id="alambda">.100</span><br>
  </center>
</td>
</tr>
</table>
</div>


</body>
